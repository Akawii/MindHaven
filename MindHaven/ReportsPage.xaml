<FlyoutPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            xmlns:syncfusion="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
            xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
            x:Class="MindHaven.ReportsPage">

    <!-- Side Menu -->
    <FlyoutPage.Flyout>
        <ContentPage Title="Menu" BackgroundColor="{StaticResource BackgroundDark}">
            <VerticalStackLayout Padding="20" Spacing="15">
                <Label Text="Menu" FontSize="24" FontAttributes="Bold"
                       TextColor="{StaticResource TextColorLight}" HorizontalOptions="Center"/>
                <Button Text="Back to Main Menu"
                        Clicked="OnMainMenuClicked"
                        BackgroundColor="{StaticResource PrimaryColor}"
                        TextColor="White"/>
            </VerticalStackLayout>
        </ContentPage>
    </FlyoutPage.Flyout>

    <!-- Main Content -->
    <FlyoutPage.Detail>
        <NavigationPage>
            <x:Arguments>
                <ContentPage Title="Reports" BackgroundColor="{StaticResource BackgroundDark}">
                    <ScrollView>
                        <VerticalStackLayout Padding="10" Spacing="15">

                            <!-- Emotion Data Section -->
                            <Label Text="Emotion Data"
                                   FontSize="20"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource PrimaryColor}"
                                   Padding="10"/>

                            <syncfusion:SfCartesianChart>
                                <syncfusion:SfCartesianChart.XAxes>
                                    <syncfusion:CategoryAxis>
                                        <syncfusion:CategoryAxis.Title>
                                            <syncfusion:ChartAxisTitle Text="Date" />
                                        </syncfusion:CategoryAxis.Title>
                                    </syncfusion:CategoryAxis>
                                </syncfusion:SfCartesianChart.XAxes>

                                <syncfusion:SfCartesianChart.YAxes>
                                    <syncfusion:NumericalAxis LabelCreated="OnLabelCreated"
                                  Minimum="2"
                                  Maximum="10"
                                  Interval="2">
                                        <syncfusion:NumericalAxis.Title>
                                            <syncfusion:ChartAxisTitle Text="Emotions" />
                                        </syncfusion:NumericalAxis.Title>
                                    </syncfusion:NumericalAxis>
                                </syncfusion:SfCartesianChart.YAxes>

                                <syncfusion:LineSeries ItemsSource="{Binding EmotionData}" 
                           XBindingPath="Date" 
                           YBindingPath="Intensity"
                           ShowMarkers="True">
                                    <syncfusion:LineSeries.MarkerSettings>
                                        <syncfusion:ChartMarkerSettings Width="10" Height="10" Type="Circle"/>
                                    </syncfusion:LineSeries.MarkerSettings>
                                </syncfusion:LineSeries>
                            </syncfusion:SfCartesianChart>

                            <!-- Recorded Notes Section -->
                            <Label Text="Recorded Notes" 
                                   FontSize="20" 
                                   FontAttributes="Bold" 
                                   TextColor="{StaticResource PrimaryColor}" 
                                   Padding="10"/>

                            <CollectionView ItemsSource="{Binding NotesData}" SelectionMode="None">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <toolkit:Expander>
                                            <toolkit:Expander.Header>
                                                <Frame Padding="10" 
                           CornerRadius="10"
                           BackgroundColor="{StaticResource PrimaryColor}">
                                                    <Label Text="{Binding Date}" 
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="White"/>
                                                </Frame>
                                            </toolkit:Expander.Header>
                                            <toolkit:Expander.Content>
                                                <Frame Padding="10" 
                           CornerRadius="10" 
                           Margin="5" 
                           BackgroundColor="{StaticResource BackgroundLight}">
                                                    <Label Text="{Binding Content}" 
                               FontSize="14" 
                               TextColor="{StaticResource TextColorLight}" 
                               IsVisible="{Binding Content, Converter={StaticResource NullToVisibilityConverter}}"/>
                                                </Frame>
                                            </toolkit:Expander.Content>
                                        </toolkit:Expander>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>


                        </VerticalStackLayout>
                    </ScrollView>
                </ContentPage>
            </x:Arguments>
        </NavigationPage>
    </FlyoutPage.Detail>

</FlyoutPage>
